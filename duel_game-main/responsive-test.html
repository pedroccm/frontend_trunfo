<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Card - Scale Method</title>
    
    <!-- React and ReactDOM from CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel Standalone for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Import Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* CSS Variables from Style Guide */
        :root {
            --color-primary: #E54E44;
            --color-secondary: #0F0F0F;
            --color-accent: #FFFFDE;
            --color-success: #22C55E;
            --color-danger: #EF4444;
            --font-family-primary: 'Roboto Condensed', sans-serif;
            --border-radius-lg: 20px;
            --border-radius-xl: 30px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
        }

        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family-primary);
            background-color: var(--color-accent);
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        /* Viewport Container - Always fits screen */
        .viewport-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--color-accent);
            overflow: hidden;
            gap: var(--spacing-lg);
        }

        /* Scalable wrapper - this will be scaled */
        .scalable-wrapper {
            transform-origin: center center;
            /* Scale will be calculated by JavaScript */
            display: flex;
            gap: var(--spacing-lg);
        }

        /* Original Card Design - Fixed dimensions */
        .card-design {
            width: 750px;
            height: 1050px;
            position: relative;
        }

        .card {
            width: 750px;
            height: 1050px;
            position: relative;
            
            /* BACKGROUND OPTIONS - Choose one: */
            /* Option 1: Image Background */
            background-color: #0F0F0F;
            background-image: url('./card-back.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            
            border-radius: var(--border-radius-xl);
            padding: var(--spacing-xl);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: var(--spacing-xl);
            box-shadow: 0 8px 32px rgba(15, 15, 15, 0.3);
            box-sizing: border-box;
            overflow: hidden;
            
            /* Card tilt animation */
            transform: perspective(1000px) 
                       rotateX(var(--rotate-x, 0deg)) 
                       rotateY(var(--rotate-y, 0deg))
                       scale(var(--scale, 1));
            transition: transform 0.1s ease, box-shadow 0.1s ease;
            transform-style: preserve-3d;
        }

        .card:hover {
            box-shadow: 0 20px 40px rgba(15, 15, 15, 0.4);
        }

        /* Holographic overlay effect */
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: var(--border-radius-xl);
            pointer-events: none;
            z-index: 1;
            
            /* Pokemon trainer gallery holographic gradient */
            background: repeating-linear-gradient(
                calc(var(--rotate-angle, -22deg) + var(--tilt-x, 0deg)),
                hsla(283, 49%, 60%, 0.6) 5%,
                hsla(2, 74%, 59%, 0.6) 10%,
                hsla(53, 67%, 53%, 0.6) 15%,
                hsla(93, 56%, 52%, 0.6) 20%,
                hsla(176, 38%, 50%, 0.6) 25%,
                hsla(228, 100%, 77%, 0.6) 30%,
                hsla(283, 49%, 61%, 0.6) 35%
            );
            
            background-size: 300% 400%;
            background-position: var(--bg-x, 0%) var(--bg-y, 0%);
            background-blend-mode: color-dodge;
            filter: brightness(calc(var(--brightness, 1) + 0.2)) contrast(2.3) saturate(1.5);
            opacity: calc(var(--opacity, 0.5) + 0.3);
            transition: all 0.1s ease;
        }

        /* Car Model Header */
        .car-model {
            width: 100%;
            background-color: var(--color-primary);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-md) var(--spacing-lg);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
            position: relative;
            z-index: 2;
        }

        .car-model-text {
            color: var(--color-accent);
            font-family: var(--font-family-primary);
            font-weight: 700;
            font-size: 48px;
            text-align: center;
            word-wrap: break-word;
        }

        /* Image Container */
        .image-container {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
            position: relative;
            z-index: 2;
        }

        .car-image {
            width: 100%;
            height: 438px;
            object-fit: cover;
            border-radius: var(--border-radius-lg);
        }

        /* Car Specifications */
        .car-specs {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
            flex: 1;
            position: relative;
            z-index: 2;
        }

        .spec-row {
            width: 100%;
            height: 58px;
            background-color: var(--color-secondary);
            border: 1px solid var(--color-accent);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-sm) var(--spacing-md);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: var(--spacing-md);
            cursor: pointer;
            transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            user-select: none;
            transform: scale(1);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        /* Interactive States */
        .spec-row:hover {
            background-color: var(--color-accent);
            border: 1px solid var(--color-accent);
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .spec-row:hover .spec-label,
        .spec-row:hover .spec-value {
            color: var(--color-secondary);
        }

        .spec-row:active {
            transform: scale(0.98);
            transition: all 0.1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .spec-row.pressed {
            background-color: var(--color-accent);
            border: 1px solid var(--color-primary);
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(229, 78, 68, 0.25);
        }

        /* =================================================================
           GAME STATE STYLES - For card comparison gameplay
           ================================================================= */
        
        /* Loading state during card comparison */
        .spec-row.comparing {
            background-color: var(--color-accent);
            border: 1px solid var(--color-primary);
            transform: scale(1.02);
            pointer-events: none;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(229, 78, 68, 0.25);
        }

        .spec-row.comparing::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 150%;
            height: 100%;
            background: repeating-linear-gradient(60deg, 
                        transparent, 
                        transparent 0.75rem, 
                        rgba(229, 78, 68, 0.3) 0.75rem, 
                        rgba(229, 78, 68, 0.3) 1.5rem);
            animation: loadingStripes 1s infinite linear;
            z-index: 1;
        }

        .spec-row.comparing .spec-label,
        .spec-row.comparing .spec-value {
            position: relative;
            z-index: 2;
            color: var(--color-secondary);
        }

        /* Winner state - successful comparison */
        .spec-row.winner {
            background-color: var(--color-success);
            border: 1px solid var(--color-success);
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(34, 197, 94, 0.4);
            animation: winnerPulse 2s ease-in-out;
            pointer-events: none;
        }

        /* Loser state - unsuccessful comparison */
        .spec-row.loser {
            background-color: var(--color-danger);
            border: 1px solid var(--color-danger);
            transform: scale(0.98);
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
            animation: loserShake 0.6s ease-in-out;
            pointer-events: none;
        }

        /* Text color for winner and loser states */
        .spec-row.winner .spec-label,
        .spec-row.winner .spec-value,
        .spec-row.loser .spec-label,
        .spec-row.loser .spec-value {
            color: white;
        }

        /* =================================================================
           GAME ANIMATIONS
           ================================================================= */
        
        /* Loading animation with diagonal stripes */
        @keyframes loadingStripes {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-1.75rem);
            }
        }

        /* Winner celebration animation */
        @keyframes winnerPulse {
            0% {
                transform: scale(1.02);
                box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
            }
            50% {
                transform: scale(1.08);
                box-shadow: 0 8px 24px rgba(34, 197, 94, 0.5);
            }
            100% {
                transform: scale(1.05);
                box-shadow: 0 6px 20px rgba(34, 197, 94, 0.4);
            }
        }

        /* Loser disappointment animation */
        @keyframes loserShake {
            0%, 100% { transform: translateX(0) scale(0.98); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-2px) scale(0.98); }
            20%, 40%, 60%, 80% { transform: translateX(2px) scale(0.98); }
        }

        /* =================================================================
           CONFETTI SYSTEM - For winner celebration
           ================================================================= */
        
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        .confetti {
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--color-success);
            border-radius: 50%;
            animation: confettiExplode 2s ease-out forwards;
        }

        .confetti:nth-child(odd) {
            background: var(--color-primary);
        }

        .confetti:nth-child(3n) {
            background: var(--color-accent);
        }

        @keyframes confettiExplode {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(0) rotate(0deg);
            }
            10% {
                opacity: 1;
                transform: translate(var(--x), var(--y)) scale(1) rotate(90deg);
            }
            100% {
                opacity: 0;
                transform: translate(calc(var(--x) * 3), calc(var(--y) * 3)) scale(0.5) rotate(720deg);
            }
        }

        .spec-row:active .spec-label,
        .spec-row:active .spec-value,
        .spec-row.pressed .spec-label,
        .spec-row.pressed .spec-value {
            color: var(--color-secondary);
        }

        .spec-label,
        .spec-value {
            color: var(--color-accent);
            font-family: var(--font-family-primary);
            font-weight: 700;
            font-size: 32px;
            word-wrap: break-word;
        }

        .spec-value {
            text-align: right;
            flex-shrink: 0;
        }

        /* Card Footer */
        .card-footer {
            width: 100%;
            text-align: center;
            color: var(--color-accent);
            font-family: var(--font-family-primary);
            font-style: italic;
            font-weight: 400;
            font-size: 24px;
            flex-shrink: 0;
            position: relative;
            z-index: 2;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const CardComponent = ({ 
            carModel = "McLaren Speedtail",
            carImage = "./carimage.png",
            maxSpeed = "403 Km/h",
            power = "1070 HP",
            acceleration = "2.5 seg",
            displacement = "3994 cc",
            weight = "1430 Kg"
        }) => {
            const cardRef = useRef(null);
            const [pressedSpec, setPressedSpec] = useState(null);
            
            /* =================================================================
               GAME STATE MANAGEMENT
               For future integration with card comparison game logic
               ================================================================= */
            const [gameState, setGameState] = useState('idle'); // 'idle', 'comparing', 'completed'
            const [comparisonResults, setComparisonResults] = useState({}); // { specName: 'winner'/'loser' }
            const [showConfetti, setShowConfetti] = useState(false);

            const handleSpecClick = (specName) => {
                // Prevent interaction during game comparison and result animations
                if (gameState === 'comparing' || gameState === 'completed') return;
                
                // Start comparison automatically when a spec is selected
                if (pressedSpec !== specName) {
                    setPressedSpec(specName);
                    startCardComparison(specName);
                } else {
                    // Reset if clicking the same spec
                    resetGameState();
                }
            };

            /* =================================================================
               CARD COMPARISON SIMULATION
               TODO: Replace with actual game logic for card-vs-card comparison
               ================================================================= */
            const startCardComparison = (selectedSpec) => {
                setGameState('comparing');
                setComparisonResults({});
                setShowConfetti(false);
                
                // Simulate comparison delay (1.5 seconds)
                setTimeout(() => {
                    // TESTING: Random winner/loser result
                    // TODO: Replace with actual card value comparison logic
                    // Example: compareCardValues(playerCard[selectedSpec], opponentCard[selectedSpec])
                    const isWinner = Math.random() > 0.5;
                    
                    setComparisonResults({ [selectedSpec]: isWinner ? 'winner' : 'loser' });
                    setGameState('completed');
                    
                    // Trigger confetti for winners
                    if (isWinner) {
                        setShowConfetti(true);
                        // Wait for DOM to update before creating confetti
                        setTimeout(() => createConfetti(), 10);
                        // Auto-hide confetti after 3 seconds
                        setTimeout(() => setShowConfetti(false), 3000);
                    }
                    
                    // Auto-reset after 4 seconds for testing
                    setTimeout(() => {
                        resetGameState();
                    }, 4000);
                }, 1500);
            };

            const resetGameState = () => {
                setPressedSpec(null);
                setGameState('idle');
                setComparisonResults({});
                setShowConfetti(false);
            };

            /* =================================================================
               CONFETTI CELEBRATION SYSTEM
               ================================================================= */
            const createConfetti = () => {
                const confettiContainer = document.querySelector('.confetti-container');
                if (!confettiContainer) return;
                
                // Get the position of the winner button
                const winnerButton = document.querySelector('.spec-row.winner');
                if (!winnerButton) return;
                
                const buttonRect = winnerButton.getBoundingClientRect();
                const buttonCenterX = buttonRect.left + buttonRect.width / 2;
                const buttonCenterY = buttonRect.top + buttonRect.height / 2;
                
                // Clear existing confetti
                confettiContainer.innerHTML = '';
                
                // Create 30 confetti pieces exploding from button center
                for (let i = 0; i < 30; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    
                    // Random angle for explosion (0-360 degrees)
                    const angle = (Math.PI * 2 * i) / 30 + (Math.random() - 0.5) * 0.5;
                    const velocity = 100 + Math.random() * 100; // Random velocity
                    
                    // Calculate explosion direction
                    const deltaX = Math.cos(angle) * velocity;
                    const deltaY = Math.sin(angle) * velocity;
                    
                    // Position confetti at button center
                    confetti.style.left = buttonCenterX + 'px';
                    confetti.style.top = buttonCenterY + 'px';
                    
                    // Set CSS custom properties for animation
                    confetti.style.setProperty('--x', deltaX + 'px');
                    confetti.style.setProperty('--y', deltaY + 'px');
                    
                    // Random colors and timing
                    const colors = ['var(--color-success)', 'var(--color-primary)', 'var(--color-accent)', '#FFD700', '#FF69B4'];
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.1 + 's';
                    confetti.style.animationDuration = (1.5 + Math.random() * 0.5) + 's';
                    
                    confettiContainer.appendChild(confetti);
                }
            };

            /* =================================================================
               SPEC ROW CLASS CALCULATION
               Determines the visual state of each specification row
               ================================================================= */
            const getSpecRowClass = (specName) => {
                let classes = 'spec-row';
                
                if (gameState === 'comparing' && pressedSpec === specName) {
                    classes += ' comparing';
                } else if (gameState === 'completed' && comparisonResults[specName]) {
                    classes += ` ${comparisonResults[specName]}`;
                } else if (pressedSpec === specName && gameState === 'idle') {
                    classes += ' pressed';
                }
                
                return classes;
            };


            /* =================================================================
               POKEMON CARD HOLOGRAPHIC MOUSE TRACKING
               ================================================================= */
            useEffect(() => {
                const card = cardRef.current;
                if (!card) return;

                const handleMouseMove = (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    
                    // Calculate rotation values (-15 to 15 degrees)
                    const rotateX = ((y - centerY) / centerY) * -15;
                    const rotateY = ((x - centerX) / centerX) * 15;
                    
                    // Calculate holographic effect values
                    const pointerX = (x / rect.width) * 100;
                    const pointerY = (y / rect.height) * 100;
                    const distance = Math.sqrt(Math.pow(x - centerX, 2) + Math.pow(y - centerY, 2));
                    const maxDistance = Math.sqrt(Math.pow(centerX, 2) + Math.pow(centerY, 2));
                    const intensity = 1 - (distance / maxDistance);
                    
                    // Update CSS custom properties
                    card.style.setProperty('--rotate-x', `${rotateX}deg`);
                    card.style.setProperty('--rotate-y', `${rotateY}deg`);
                    card.style.setProperty('--scale', '1.05');
                    card.style.setProperty('--bg-x', `${pointerX}%`);
                    card.style.setProperty('--bg-y', `${pointerY}%`);
                    card.style.setProperty('--brightness', intensity);
                    card.style.setProperty('--opacity', intensity * 0.8);
                    card.style.setProperty('--tilt-x', `${rotateY * 0.5}deg`);
                };

                const handleMouseLeave = () => {
                    // Reset to default values
                    card.style.setProperty('--rotate-x', '0deg');
                    card.style.setProperty('--rotate-y', '0deg');
                    card.style.setProperty('--scale', '1');
                    card.style.setProperty('--bg-x', '0%');
                    card.style.setProperty('--bg-y', '0%');
                    card.style.setProperty('--brightness', '1');
                    card.style.setProperty('--opacity', '0.5');
                    card.style.setProperty('--tilt-x', '0deg');
                };

                card.addEventListener('mousemove', handleMouseMove);
                card.addEventListener('mouseleave', handleMouseLeave);

                return () => {
                    card.removeEventListener('mousemove', handleMouseMove);
                    card.removeEventListener('mouseleave', handleMouseLeave);
                };
            }, []);

            return (
                <div className="card-design">
                    <div className="card" ref={cardRef}>
                                <div className="car-model">
                                    <div className="car-model-text">{carModel}</div>
                                </div>
                                
                                <div className="image-container">
                                    <img 
                                        className="car-image" 
                                        src={carImage} 
                                        alt={carModel}
                                    />
                                </div>
                                
                                {/* =================================================================
                                    INTERACTIVE SPECIFICATION ROWS
                                    Click any spec to start a simulated card comparison
                                    ================================================================= */}
                                <div className="car-specs">
                                    <div 
                                        className={getSpecRowClass('speed')}
                                        onClick={() => handleSpecClick('speed')}
                                    >
                                        <div className="spec-label">Velocidade Máxima</div>
                                        <div className="spec-value">{maxSpeed}</div>
                                    </div>
                                    
                                    <div 
                                        className={getSpecRowClass('power')}
                                        onClick={() => handleSpecClick('power')}
                                    >
                                        <div className="spec-label">Potência</div>
                                        <div className="spec-value">{power}</div>
                                    </div>
                                    
                                    <div 
                                        className={getSpecRowClass('acceleration')}
                                        onClick={() => handleSpecClick('acceleration')}
                                    >
                                        <div className="spec-label">0-100 Km/h</div>
                                        <div className="spec-value">{acceleration}</div>
                                    </div>
                                    
                                    <div 
                                        className={getSpecRowClass('displacement')}
                                        onClick={() => handleSpecClick('displacement')}
                                    >
                                        <div className="spec-label">Cilindradas</div>
                                        <div className="spec-value">{displacement}</div>
                                    </div>
                                    
                                    <div 
                                        className={getSpecRowClass('weight')}
                                        onClick={() => handleSpecClick('weight')}
                                    >
                                        <div className="spec-label">Peso</div>
                                        <div className="spec-value">{weight}</div>
                                    </div>
                                </div>
                                
                                <div className="card-footer">
                                    Super Trunfo Online
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {/* =================================================================
                        CONFETTI CELEBRATION CONTAINER
                        Shows confetti animation when player wins a comparison
                        ================================================================= */}
                    {showConfetti && <div className="confetti-container"></div>}
            );
        };

        // Dual card container with scaling
        const DualCardContainer = () => {
            const wrapperRef = useRef(null);

            useEffect(() => {
                const calculateScale = () => {
                    if (!wrapperRef.current) return;

                    const wrapper = wrapperRef.current;
                    const viewportWidth = window.innerWidth;
                    const viewportHeight = window.innerHeight;
                    
                    // Original card dimensions
                    const cardWidth = 750;
                    const cardHeight = 1050;
                    
                    // Account for two cards side by side with gap
                    const totalWidth = (cardWidth * 2) + 24; // 24px gap (--spacing-lg)
                    
                    // Calculate scale factors for both dimensions
                    const scaleX = viewportWidth / totalWidth;
                    const scaleY = viewportHeight / cardHeight;
                    
                    // Use the smaller scale to ensure it fits completely
                    const scale = Math.min(scaleX, scaleY) * 0.95; // 0.95 for small margin
                    
                    wrapper.style.transform = `scale(${scale})`;
                };

                // Calculate on mount and resize
                calculateScale();
                window.addEventListener('resize', calculateScale);
                window.addEventListener('orientationchange', () => {
                    setTimeout(calculateScale, 100); // Small delay for orientation change
                });

                return () => {
                    window.removeEventListener('resize', calculateScale);
                    window.removeEventListener('orientationchange', calculateScale);
                };
            }, []);

            return (
                <div className="viewport-container">
                    <div className="scalable-wrapper" ref={wrapperRef}>
                        <CardComponent 
                            carModel="McLaren Speedtail"
                            carImage="./carimage.png"
                            maxSpeed="403 Km/h"
                            power="1070 HP"
                            acceleration="2.5 seg"
                            displacement="3994 cc"
                            weight="1430 Kg"
                        />
                        <CardComponent 
                            carModel="McLaren Speedtail"
                            carImage="./carimage.png"
                            maxSpeed="403 Km/h"
                            power="1070 HP"
                            acceleration="2.5 seg"
                            displacement="3994 cc"
                            weight="1430 Kg"
                        />
                    </div>
                </div>
            );
        };

        // Two McLaren cards side by side
        const App = () => {
            return <DualCardContainer />;
        };

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>